{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="w-full px-4">

  <!-- ğŸ› í•„í„° -->
  <section class="bg-white shadow rounded-xl p-4 mb-6">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
      <select id="crop" class="border rounded p-2">
        {% for crop in crops %}
          <option value="{{ crop }}">{{ crop }}</option>
        {% endfor %}
      </select>

      <select id="year" class="border rounded p-2">
        {% for y in years %}
          <option value="{{ y }}">{{ y }}</option>
        {% endfor %}
      </select>

      <select id="country" class="border rounded p-2">
        {% for c in countries %}
          <option value="{{ c.iso_code }}">{{ c.name }}</option>
        {% endfor %}
      </select>

      <button id="map-update-btn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">ì—…ë°ì´íŠ¸</button>
    </div>
  </section>

  <!-- ğŸ” ë‹¨ìœ„ ì„ íƒ -->
  <section class="flex items-center gap-6 mb-4 px-2 text-sm">
    <label><input type="radio" name="unit" value="acres" checked class="mr-1">acres</label>
    <label><input type="radio" name="unit" value="hectares" class="mr-1">hectares</label>
  </section>

  <!-- ğŸ—º ì§€ë„ + ğŸ“Š ê·¸ë˜í”„ -->
  <section class="flex flex-col lg:flex-row gap-6">

    <!-- ì™¼ìª½: ì§€ë„ -->
    <div class="flex-1 bg-white shadow-md rounded-xl p-4">
      <h2 class="text-lg font-semibold mb-2">ğŸ—ºï¸ ë‹¨ê³„êµ¬ë¶„ë„ ì§€ë„</h2>
      <div id="map" class="w-full h-[600px] rounded border"></div>

    </div>

    <!-- ì˜¤ë¥¸ìª½: ë°” ê·¸ë˜í”„ -->
    <div class="flex-1 bg-white shadow-md rounded-xl p-4">
      <h2 class="text-lg font-semibold mb-2">ğŸ“Š ì£¼ë³„ ì¬ë°° ë©´ì  ë¹„êµ</h2>
      <div id="area-bar" class="h-[400px]"></div>
    </div>

  </section>

</div>

<!-- ğŸ“¦ ìŠ¤í¬ë¦½íŠ¸ -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<link href="https://unpkg.com/leaflet/dist/leaflet.css" rel="stylesheet" />
<script src="{% static 'js/area_map_logic.js' %}"></script>
{% endblock %}
