{% extends 'base.html' %}
{% load static %}
{% block title %}ê¸°ìƒ ë°ì´í„° ì‹œê°í™”{% endblock %}

{% block content %}
    {#<div class="w-full max-w-7xl mx-auto">#}


        <div class="w-full px-4"> <!-- âœ… ì „ì²´ í­ -->

        <!-- âœ… ì„ íƒ í•„í„° -->
        <section class="bg-white shadow-md rounded-xl p-6 mb-8">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">ğŸŒ¦ï¸ ê¸°ìƒ ì‹œê°í™” ì„¤ì •</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <div>
                    <label for="crop" class="block text-sm font-medium text-gray-700">ì‘ë¬¼</label>
                    <select id="crop" class="w-full border rounded-md px-3 py-2">
                        <option value="">Select Crop</option>
                        {% for crop in crops %}
                            <option value="{{ crop }}">{{ crop }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div>
                    <label for="year" class="block text-sm font-medium text-gray-700">ì—°ë„</label>
                    <select id="year" class="w-full border rounded-md px-3 py-2">
                        <option value="">Select Year</option>
                    </select>
                </div>

                <div>
                    <label for="country" class="block text-sm font-medium text-gray-700">êµ­ê°€</label>
                    <select id="country" class="w-full border rounded-md px-3 py-2">
                        <option value="">Select Country</option>
                    </select>
                </div>

                <div>
                    <label for="state" class="block text-sm font-medium text-gray-700">ì£¼</label>
                    <select id="state" class="w-full border rounded-md px-3 py-2">
                        <option value="">Select State</option>
                    </select>
                </div>

                <div id="variant-group" class="hidden">
                    <label for="variant" class="block text-sm font-medium text-gray-700">Wheat Variant</label>
                    <select id="variant" class="w-full border rounded-md px-3 py-2">
                        <option value="">Select Variant</option>
                    </select>
                </div>

                <div>
                    <label for="mode" class="block text-sm font-medium text-gray-700">ëª¨ë“œ</label>
                    <select id="mode" class="w-full border rounded-md px-3 py-2">
                        <option value="static">ì •ì  ì´ë¯¸ì§€</option>
                    </select>
                </div>

                <div>
                    <label for="variable-group" class="block text-sm font-medium text-gray-700">ë³€ìˆ˜ ê·¸ë£¹</label>
<select id="variable-group" class="w-full border rounded-md px-3 py-2">
                        <option value="">Select Group</option>
                        <option value="pr">ê°•ìˆ˜ëŸ‰ (pr)</option>
                        <option value="temp">ê¸°ì˜¨ (temp)</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- âœ… ì‹œê°í™” ê²°ê³¼ -->
{#        <section class="bg-white shadow-md rounded-xl p-6">#}
                    <!-- ì§€ë„ -->
            <section class="flex flex-col lg:flex-row gap-6">

       <div class="flex-1 bg-white shadow-md rounded-xl p-4">
            <h2 class="text-lg font-semibold text-gray-800 mb-2">ğŸ—ºï¸ ì§€ë„</h2>
            <div id="map" class="w-full h-[650px] rounded-lg"></div>
        </div>
        <aside class="flex-1 bg-white shadow-md rounded-xl p-4">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">ğŸ“ˆ ì‹œê°í™” ê²°ê³¼</h2>

            <!-- íƒ­ ë©”ë‰´ -->
            <div class="flex border-b mb-4">
                <button id="tab-timeseries" class="px-4 py-2 border-b-2 border-blue-500 text-blue-500 font-semibold">
                    ì‹œê³„ì—´ ê·¸ë˜í”„
                </button>
                <button id="tab-zscore" class="px-4 py-2 border-b-2 border-transparent text-gray-500">
                    Z-score
                </button>
            </div>

            <!-- ì‹œê³„ì—´ ê·¸ë˜í”„ ì»¨í…Œì´ë„ˆ -->
            <div id="timeseries-container" class="w-full min-h-[300px]">
                <div id="climate-plot" class="w-full min-h-[300px]"></div>
            </div>

            <!-- Z-score ì»¨í…Œì´ë„ˆ (ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€) -->
            <div id="zscore-container" class="w-full min-h-[300px] hidden">
                <div id="climate-zscore-plot" class="w-full min-h-[300px]"></div>
            </div>
          </aside>
            </section>
    </div>

    <!-- âœ… JavaScript -->

    <script>
        // Wheat ì„ íƒ ì‹œ Variant í‘œì‹œ
        document.addEventListener("DOMContentLoaded", function () {
            const cropSelect = document.getElementById("crop");
            const variantGroup = document.getElementById("variant-group");

            cropSelect.addEventListener("change", function () {
                if (this.value.toLowerCase() === "wheat") {
                    variantGroup.classList.remove("hidden");
                } else {
                    variantGroup.classList.add("hidden");
                }
            });
        });
    </script>

<script src="{% static 'js/climate_map_logic.js' %}"></script>
    <script src="{% static 'js/boundary_logic.js' %}"></script>

    <script src="{% static 'js/climate_plot_logic.js' %}"></script>


{% endblock %}
