{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="w-full px-4">
  <section class="flex flex-col lg:flex-row gap-6">

    <!-- ğŸ—ºï¸ ì™¼ìª½ ì§€ë„ ì˜ì—­ (ë¹„ì›Œë‘ ) -->
    <div class="flex-1 bg-gray-100 border border-dashed h-[600px] rounded-xl flex items-center justify-center">
      <span class="text-gray-400">[ì¶”í›„ ì§€ë„ í‘œì‹œ ì˜ì—­]</span>
    </div>

    <!-- ğŸ“Š ì˜¤ë¥¸ìª½: ì„ íƒ UI + ê·¸ë˜í”„ -->
    <div class="flex-1 bg-white shadow-md rounded-xl p-4">
      <h2 class="text-lg font-semibold mb-3">NIRv ì‹œê³„ì—´ ë¹„êµ</h2>

      <!-- ğŸ› ë“œë¡­ë‹¤ìš´ í•„í„° -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
        <select id="crop" class="border rounded p-2">
          <option value="">ì‘ë¬¼ ì„ íƒ</option>
          {% for crop in crops %}
            <option value="{{ crop }}">{{ crop }}</option>
          {% endfor %}
        </select>

        <select id="year" class="border rounded p-2">
          <option value="">ì—°ë„ ì„ íƒ</option>
          <!-- JSì—ì„œ crop ì„ íƒ ì‹œ ë™ì ìœ¼ë¡œ ë¡œë”© -->
        </select>

        <select id="state" class="border rounded p-2">
          <option value="">ì£¼ ì„ íƒ</option>
          <!-- JSì—ì„œ year ì„ íƒ ì‹œ ë™ì ìœ¼ë¡œ ë¡œë”© -->
        </select>
      </div>

      <button id="load-btn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">ì—…ë°ì´íŠ¸</button>

      <!-- íƒ­ ë©”ë‰´ -->
      <div class="flex border-b mt-6 mb-4">
        <button id="tab-nirv" class="px-4 py-2 border-b-2 border-blue-500 text-blue-500 font-semibold">
          NIRv ì‹œê³„ì—´
        </button>
        <button id="tab-zscore" class="px-4 py-2 border-b-2 border-transparent text-gray-500">
          Z-score ë“±ê¸‰
        </button>
      </div>

      <!-- NIRv ì‹œê³„ì—´ ì»¨í…Œì´ë„ˆ -->
      <div id="nirv-container" class="mb-6">
        <div id="nirv-plot" class="h-[450px] w-full"></div>
      </div>

      <!-- Z-score ì»¨í…Œì´ë„ˆ (ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€) -->
      <div id="zscore-container" class="hidden">
        <div id="zscore-plot" class="h-[450px] w-full"></div>
      </div>

    </div>

  </section>
</div>

<!-- ğŸ“¦ Plotly & JS -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="{% static 'js/nirv_plot.js' %}"></script>
{% endblock %}
